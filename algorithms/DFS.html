<!DOCTYPE html>
<html>
 <head>
<!-- Yandex.RTB -->
<script>window.yaContextCb=window.yaContextCb||[]</script>
<script src="https://yandex.ru/ads/system/context.js" async></script>
	    <link rel="icon" href="https://1ww1s.github.io/Code.c/favicon.ico" type="image/x-icon">

  <meta charset="utf-8">
  
  <title>Обход в глубину</title>
 </head>
 
 <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="CSS2.css">
 
 <body>
	<div id="container">
		<nav class="darken"></nav>
		<div id="navigation_top">
			<div id="navigation_main">
			<div id="m">
				
						<div class="bt"><img width="100%" src="t.png"></div>
						<nav class="menu">
						<div class="scroll" id="navigation">
							<div id="nav1">
								<nav style = "margin-top:1vmax">
									<a href="..\index.html" >Главная</a><br>
									<a href="..\learning\learning.html"> Изучение</a><br>
									<a href="..\tasks\tasks.html"> Задачи</a><br>
									<a href="algorithms.html" style="color:#0000dd">Алгоритмы</a><br>
								</nav>	
								
							</div>
							<div style="margin-top:5vmax" id="border1"></div>
							<div id="nav_page">
								<div id="nav1">
									 <p class="p_nav_page"><b><font style="font-size:125%">Навигация по странице:</font></b><br>
										<a href="#1">1. Хранение графа</a><br>
										<a href="#2">2. Выделение памяти</a><br>
										<a href="#3">3. Рекурсивный алгоритм DFS</a><br>
										<a href="#4">4. Нерекурсивный алгоритм DFS</a><br>
										<a href="#5">5. Задача с решением</a></p>
								</div>
								<div id="border1"></div>
								<div id="nav1">
									<p class="p_nav_page"><b><a href="..\tasks\tasksgraph.html">Задачи на графы</a></b><br>
								</div>
								<div id="border1"></div>
								
							</div>
						</div>
						
	
					</nav>
				
					<script>const btnMenu = document.querySelector('.bt');
const menu = document.querySelector('.menu');
const darken = document.querySelector('.darken');


const toggleMenu = function() {
    menu.classList.toggle('open');
	 darken.classList.toggle('open');
}

btnMenu.addEventListener('click', function(e) {
    e.stopPropagation();
    toggleMenu();
});

document.addEventListener('click', function(e) {
    const target = e.target;
    const its_menu = target == menu || menu.contains(target);
    const its_btnMenu = target == btnMenu;
    const menu_is_active = menu.classList.contains('open');
    
    if (!its_menu && !its_btnMenu && menu_is_active) {
        toggleMenu();
    }
	
});

</script>

					<div id = "name">
						<a href="..\index.html" style=" font-family: sans-serif; color:white;"><b>Code.C</b></a>
					</div>
				</div>
				
				
				<div id="pk">
					<div id = "name">
						<a href="..\index.html" style=" font-family: sans-serif; color:white;"><b>Code.C</b></a>
					</div>
					<div id="navigation">
							<nav>
							<a href="..\index.html" >Главная</a>
							<a href="..\learning\learning.html">Изучение</a>
							<a href="..\tasks\tasks.html">Задачи</a>
							<a href="algorithms.html" style = "color:#1e90ff">Алгоритмы</a>
							</nav>	
					</div>
				</div>
				
			</div>
		</div>
		
		
		<div id="body">
			<div id = "text">
		
				<h1>Обход в глубину</h1>
				<p>DFS один самых распространенных алгоритмов на графы. Основная суть состоит в том, чтобы идти по графу пока не посетим все вершины. 
				Если у проверяемой вершины есть путь в другую вершину, в которой мы еще не были, 
				то мы идем в нее и начинаем проверять уже ее. Все вершины, в которых были, мы помечаем, 
				чтобы не пойти в них еще раз. Когда мы дойдем до вершины, в которой уже нет доступных путей, то мы возвращаемся на один шаг назад, 
				то есть к предыдущей вершине и проверяем ее и так далее. Обход заканчивается, когда мы вернулись к стартовой вершине и из нее больше нет доступных путей.</p>
				<p>Если в графе <b>N</b> вершин и <b>M</b> ребер, то сложность обхода составляет <b>O(N + M)</b>.</p>
				</div>
				<div style="height:2870px;background-color:red" class= "pk"id="rb">
					<div id="rightblock">
						<p style="margin-left:10px" class="p_right"><b><font style="font-size:125%">Навигация по странице:</font></b><br>
							<a href="#1">1. Хранение графа</a><br>
							<a href="#2">2. Выделение памяти</a><br>
							<a href="#3">3. Рекурсивный алгоритм DFS</a><br>
							<a href="#4">4. Нерекурсивный алгоритм DFS</a><br>
							<a href="#5">5. Задача с решением</a></p>
							<div style="width:100%" id="border1"></div>
							<b><p style="margin-left:10px" class="p_right">Обход в глубину:</p></b>
							<img width="100%" src ="dfs.gif">
							<div style="width:100%" id="border1"></div>
						<p style="margin-left:10px"  class="p_right"><b><a href="..\tasks\tasksgraph.html">Задачи на графы</a></b><br>
						</p>
				</div>
				<!-- Yandex.RTB R-Graph-1944727-5 -->
					<div style="max-width:85%;margin:30px auto;max-height:675px;position:sticky;top:30px;border: 2px solid black;" id="yandex_rtb_R-A-1944727-5">
						<script>window.yaContextCb.push(()=>{
						  Ya.Context.AdvManager.render({
							renderTo: 'yandex_rtb_R-A-1944727-5',
							blockId: 'R-A-1944727-5'
						  })
						})</script>
					</div>
			</div>
				
				
				<div id="text">
				<h3 id="1">Хранение графа</h3>
				<p>Граф будет храниться в массиве структур. Полностью про хранение графа в программе смотрите в разделе <a href = "vertice.html" style = "color:#0000dd">представление графа в программе</a>.</p>
				
		
				<p>Каждый элемент массива структур хранит информацию об одной из вершин графа, а именно:</p><p style="margin-left:10px"> 1) пути из этой вершины;<br>
				
				2) количество таких путей;<br>3) посещали ли мы уже эту вершину или нет.</p>
	
				<p>Вот так выглядит такая структура:</p>
				<pre class="cpp" style="margin-left:10px"><span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span><span style="color: #000040;">*</span> paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// пути</span>
	<span style="color: #0000ff;">int</span> number_of_paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во путей</span>
	<span style="color: #0000ff;">int</span> flag<span style="color: #008080;">;</span>  <span style="color: #339900;">// были вершине или нет</span>
<span style="color: #008000;">&#125;</span><span style="color: #008080;">;</span></pre>

				<p id="2">Так как изначально мы не знаем сколько у каждой вершины путей, то придется выделять такую память 
				<a href="..\learning\DMA.html" style = "color:#0000dd">динамически</a>. В начале программы нужно для каждого элемента массива структур
				динамически выделить память под один элемент массива путей с помощью функции malloc. Далее после каждого ввода пары вершин, 
				описывающие связь ребром между этими вершинами, мы выделяем дополнительный
				элемент с помощью функции realloc:</p>
				<pre class="cpp" style="margin-left:10px"><span style="color: #0000dd;">scanf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>v, <span style="color: #000040;">&amp;</span>u<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  <span style="color: #339900">// между этими вершинами есть путь</span>
Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span></pre>
				<p>Сразу после этого добавляем в массив путей новую вершину, в которую можно попасть из текущей. Добавление путей для неориентированного графа:</p>
				<pre class="cpp" style="margin-left:10px">Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span></pre>
				<p>Таким образом мы добавили путь из <b>v</b> в <b>u</b> и наоборот.</p>
				<p>Для ориентированного графа необходимы только первые две строчки при условии, что ребро имеет направление из <b>v</b> в <b>u</b>.</p>
				<p>Естественно изначально у каждой вершины количество путей равно нулю и никакую вершину мы еще не посещали, поэтому для любой <b>i</b> верно, что
				Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span> и Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>.
				
				<h3 id="3">Рекурсивный алгоритм DFS</h3>
				<div id="t">
					<div id = "text2-1"><p class="p1">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10
				<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31
				<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44</p></div>
					<div id="text2-2">
<pre class="cpp"><span style="color: #339900;">#include&lt;stdio.h&gt;</span>
<span style="color: #339900;">#include&lt;stdlib.h&gt;</span>
&nbsp;
<span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span><span style="color: #000040;">*</span> paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// пути</span>
	<span style="color: #0000ff;">int</span> number_of_paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во путей</span>
	<span style="color: #0000ff;">int</span> flag<span style="color: #008080;">;</span>  <span style="color: #339900;">// были в вершине или нет</span>
<span style="color: #008000;">&#125;</span><span style="color: #008080;">;</span>
&nbsp;
<span style="color: #0000ff;">void</span> <span style="color: #CA6F1E">DFS</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> G<span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span>, <span style="color: #0000ff;">int</span> cur<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span> l <span style="color: #000080;">=</span> G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span> j <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> j <span style="color: #000080;">&lt;</span> l<span style="color: #008080;">;</span> j<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
		<span style="color: #0000ff;">if</span> <span style="color: #008000;">&#40;</span>G<span style="color: #008000;">&#91;</span>G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">==</span> <span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
			G<span style="color: #008000;">&#91;</span>G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
			DFS<span style="color: #008000;">&#40;</span>G, G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		<span style="color: #008000;">&#125;</span>
	<span style="color: #008000;">&#125;</span>
	<span style="color: #0000ff;">return</span><span style="color: #008080;">;</span>
<span style="color: #008000;">&#125;</span>
&nbsp;
<span style="color: #0000ff;">int</span> main<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> Graph<span style="color: #008000;">&#91;</span><span style="color: #0000dd;">100</span><span style="color: #008000;">&#93;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">int</span> n, m, i, j, v, u<span style="color: #008080;">;</span>
	scanf_s<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i %i&quot;</span>, <span style="color: #000040;">&amp;</span>n, <span style="color: #000040;">&amp;</span>m<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> n<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// начальная инициализация </span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// изначально никакая вершина не посещена</span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// массив путей изначально пуст </span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">malloc</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// выделяем динамически память</span>
	<span style="color: #008000;">&#125;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> m<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// заполнение массива структур</span>
		scanf_s<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>v, <span style="color: #000040;">&amp;</span>u<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
	<span style="color: #008000;">&#125;</span>
&nbsp;
	<span style="color: #0000ff;">int</span> start <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
	Graph<span style="color: #008000;">&#91;</span>start<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// мы сейчас в этой вершине</span>
	<span style="color: #CA6F1E">DFS</span><span style="color: #008000;">&#40;</span>Graph, start<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// функция обхода</span>
	<span style="color: #0000ff;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
<span style="color: #008000;">&#125;</span></pre>
					</div>
				</div>
			<p><b>!</b> В данном примере не проверяются входные данные и правильность выделения памяти под динамические массивы. Ввод с проверками представлен в <a href = "BFS.html" style = "color: #0000dd">BFS</a> (строки 41 - 60).</p>			
			<p>Следующий уровень рекурсии - это новая вершина. После того, как мы оказались в вершине, из которой нет больше доступных путей, мы возвращаемся на один уровеь назад - в вершину, из которой пришли в данную.
				Алгоритм продолжается, пока мы не пройдем все доступные вершины и не вернемся на самый первый уровень (в вершину start) в строчку 19.</p>
			</div>
				<div class="mobile" id ="rightblock">
				<!-- Yandex.RTB R-A-1944727-1 -->
						<div id="yandex_rtb_R-A-1944727-1"></div>
						<script>window.yaContextCb.push(()=>{
						  Ya.Context.AdvManager.render({
							renderTo: 'yandex_rtb_R-A-1944727-1',
							blockId: 'R-A-1944727-1'
						  })
						})</script>
				</div>	
			<div id="text">
				<h3 id="4">Нерекурсивный алгоритм DFS</h3>
				<p>Для нерекурсивного обхода нам понадобиться еще две переменные в структуре, а именно:<br>
				1) номер вершины, из которой мы пришли в эту(предок вершины);<br>2) на каком элементе закончили проверку путей из вершины.
				<br>Теперь структура будет выглядеть так:
				<pre class="cpp" style="margin-left:10px"><span style="color: #0000ff;">struct</span>  <span style="color: #009999">vertice</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span><span style="color: #000040;">*</span> paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// пути</span>
	<span style="color: #0000ff;">int</span> number_of_paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во путей</span>
	<span style="color: #0000ff;">int</span> flag<span style="color: #008080;">;</span>  <span style="color: #339900;">// были в вершине или нет</span>
	<span style="color: #0000ff;">int</span> ancestor<span style="color: #008080;">;</span>  <span style="color: #339900;">// предок вершины</span>
	<span style="color: #0000ff;">int</span> exit<span style="color: #008080;">;</span>  <span style="color: #339900;">// на каком элементе закончили проверку </span>
<span style="color: #008000;">&#125;</span><span style="color: #008080;">;</span></pre>
				</p>
				<p>Давайте посмотрим на алгоритм обхода в глубину с вводом всего графа:</p>
				<div id ="t">
				<div id = "text2-1"><p class="p1">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10
				<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31
				<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58
				59<br>60</p></div>
				<div id="text2-2">
				<pre class="cpp" ><span style="color: #339900;">#define _CRT_SECURE_NO_WARNINGS</span>
<span style="color: #339900;">#include&lt;stdio.h&gt;</span>
<span style="color: #339900;">#include&lt;stdlib.h&gt;</span>
&nbsp;
<span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span><span style="color: #000040;">*</span> paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// пути</span>
	<span style="color: #0000ff;">int</span> number_of_paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во путей</span>
	<span style="color: #0000ff;">int</span> ancestor<span style="color: #008080;">;</span>  <span style="color: #339900;">// предок вершины</span>
	<span style="color: #0000ff;">int</span> flag<span style="color: #008080;">;</span>  <span style="color: #339900;">// были в вершине или нет</span>
	<span style="color: #0000ff;">int</span> exit<span style="color: #008080;">;</span>  <span style="color: #339900;">// на каком элементе закончили проверку </span>
<span style="color: #008000;">&#125;</span><span style="color: #008080;">;</span>
&nbsp;
<span style="color: #0000ff;">int</span> main<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">struct</span> <span style="color: #009999">vertice</span> Graph<span style="color: #008000;">&#91;</span><span style="color: #0000dd;">100</span><span style="color: #008000;">&#93;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">int</span> n, m, i, j, v, u, anc<span style="color: #008080;">;</span>
	<span style="color: #0000dd;">scanf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>n, <span style="color: #000040;">&amp;</span>m<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> n<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// начальная инициализация </span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// изначально никакая вершина не посещена</span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// изначально вообще нет путей </span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.exit <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// изначально начинаем проверку с 0</span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">malloc</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// выделяем динамически память</span>
	<span style="color: #008000;">&#125;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> m<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// заполнение массива структур</span>
		<span style="color: #0000dd;">scanf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>v, <span style="color: #000040;">&amp;</span>u<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span> 
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
	<span style="color: #008000;">&#125;</span>
&nbsp;
	<span style="color: #339900;">// начало обхода</span>
	<span style="color: #0000ff;">int</span> start <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">int</span> cur <span style="color: #000080;">=</span> start<span style="color: #008080;">;</span>  <span style="color: #339900;">// в этой переменной храним текущую вершину</span>
	Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// мы сейчас в этой вершине</span>
	<span style="color: #0000ff;">int</span> fl <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">while</span> <span style="color: #008000;">&#40;</span>fl <span style="color: #000080;">==</span> <span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
		j <span style="color: #000080;">=</span> Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.exit<span style="color: #008080;">;</span>
		<span style="color: #0000ff;">while</span> <span style="color: #008000;">&#40;</span>j <span style="color: #000080;">&lt;</span> Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// просматриваем пути из вершины cur</span>
			Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.exit<span style="color: #000040;">++</span><span style="color: #008080;">;</span>
			<span style="color: #0000ff;">if</span> <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">==</span> <span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// если еще не ходили в эту вершину, то идем</span>
				Graph<span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
				anc <span style="color: #000080;">=</span> cur<span style="color: #008080;">;</span>  
				cur <span style="color: #000080;">=</span> Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// замена текущей вершины</span>
				Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">ancestor</span> <span style="color: #000080;">=</span> anc<span style="color: #008080;">;</span>
				j <span style="color: #000080;">=</span> <span style="color: #000040;">-</span><span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
			<span style="color: #008000;">&#125;</span>
			j<span style="color: #000040;">++</span><span style="color: #008080;">;</span>
		<span style="color: #008000;">&#125;</span>
		<span style="color: #0000ff;">if</span> <span style="color: #008000;">&#40;</span>cur <span style="color: #000080;">==</span> start<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// если обошли весь граф, то завершаем обход </span>
			fl <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		<span style="color: #008000;">&#125;</span>
		<span style="color: #0000ff;">else</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// иначе возвращаемся в предыдущую вершниу</span>
			cur <span style="color: #000080;">=</span> Graph<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">ancestor</span><span style="color: #008080;">;</span>
		<span style="color: #008000;">&#125;</span>
	<span style="color: #008000;">&#125;</span>
	<span style="color: #339900;">// конец обхода</span>
	<span style="color: #0000ff;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
<span style="color: #008000;">&#125;</span></pre>
				</div>
				</div>
				<p>Как мы видим, нерекурсивный алгоритм дольше писать. Но нужно понимать, что использование рекурсивного алгоритма подразумевает
				использование практически не контролируемого ресурса: <b>стека вызовов</b>, который может быть переполнен. Поэтому в некоторых задачах
				лучше использовать нерекурсивный алгоритм.</p>
				<h3 id="5">Задача</h3>
				<p>Есть n человек, пронумерованных от 1 до <b>n</b>. Так получилось, что у <b>K</b>-ого человека сегодня день рождения и он хочет пойти с друзьями в лазертаг. 
				Чтобы в него пойти нужно ровно <b>P</b> человек вместе с именинником. Если людей будет не хватать, то каждый друг начнет звать уже своих друзей и так далее. Всего
				дружат <b>m</b> пар людей.
				Вам нужно вывести номера людей, которые пойдут в лазертаг. Если ответов несколько, то можно вывести любой из них. Гарантируется, что <b>P</b> точно меньше количества людей, которые 
				могут пойти в лазертаг.<br>
				<b>Входные данные:</b><br>
				Первая строка содержит целые числа <b>n</b>(2 &#8804 <b>n</b> &#8804 100), <b>m</b>(1 &#8804 <b>m</b> &#8804 100), <b>K</b>(1 &#8804 <b>K</b> &#8804 100), 
				<b>P</b>(2 &#8804 <b>P</b> &#8804 100) - количество людей, количества пар друзей, номер человека, у которого сегодня день рождения и нужное количество людей в лазертаг 
				соответственно.<br>
				Следующие <b>m</b> строк содержат два числа, обозначающие дружбу между человеком <b>v</b> и человеком <b>u</b>.<br>
  				<b>Выходные данные:</b><br>
				Вывести через пробел номера людей, которые должны прийти в лазертаг. Именинника вывести первым.
				<p>Пример:</p>
			
				<table class="iksweb">
					<tbody style="text-align:left">
						<tr>
							<td>Ввод </td>
							<td>Вывод</td>
						</tr>
						<tr>
							<td>9 8 3 6<br>
							1 2<br>
							8 9<br>
							6 4<br>
							4 7<br>
							3 4<br>
							4 5<br>
							7 9<br>
							8 3							
							</td>
							<td>3 4 6 7 9 8</td>
						</tr>
					</tbody>
				</table>
				<h3>Граф из примера выглядит так:</h3>
				<img width="40%" src ="graph2.jpg">
					
				<div class="demo">
				<input type="checkbox" id="hd-1" class="hide"/>
				<label for="hd-1" style="-webkit-user-select: none;">
					<h2>Решение</h2>
					
				</label>
				<div>
				<div id="text2">
				<p>Для решения один раз запускаем DFS, начиная с вершины K - 1. Выводим номера друзей пока их количество меньше или равно P. Минус
				использования рекурсии заключается в том, что когда мы выведем ответ, то не сразу закончим программу, так как рекурсия будет работать до полного обхода графа.
				Поэтому попытайтесь самим написать нерекурсивный алгоритм для этой задачи.
				</p>
				<div id="t">
				<div id = "text2-1"><p class="p1">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10
				<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31
				<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49</p></div>
				<div id="text2-2">
				<pre class="cpp"><span style="color: #339900;">#define _CRT_SECURE_NO_WARNINGS</span>
<span style="color: #339900;">#include&lt;stdio.h&gt;</span>
<span style="color: #339900;">#include&lt;stdlib.h&gt;</span>
&nbsp;
<span style="color: #0000ff;">struct</span> vertice <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span><span style="color: #000040;">*</span> paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// пути</span>
	<span style="color: #0000ff;">int</span> number_of_paths<span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во путей</span>
	<span style="color: #0000ff;">int</span> flag<span style="color: #008080;">;</span>  <span style="color: #339900;">// были в вершине или нет</span>
<span style="color: #008000;">&#125;</span><span style="color: #008080;">;</span>
&nbsp;
<span style="color: #0000ff;">int</span> DFS<span style="color: #008000;">&#40;</span><span style="color: #0000ff;">struct</span> vertice G<span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span>, <span style="color: #0000ff;">int</span> cur, <span style="color: #0000ff;">int</span> p, <span style="color: #0000ff;">int</span> numb<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">int</span> l <span style="color: #000080;">=</span> G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span> j <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> j <span style="color: #000080;">&lt;</span> l<span style="color: #008080;">;</span> j<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
		<span style="color: #0000ff;">if</span> <span style="color: #008000;">&#40;</span>G<span style="color: #008000;">&#91;</span>G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">==</span> <span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
			numb<span style="color: #000040;">++</span><span style="color: #008080;">;</span>
			<span style="color: #0000ff;">if</span> <span style="color: #008000;">&#40;</span>numb <span style="color: #000080;">&lt;=</span> p<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span> <span style="color: #0000dd;">printf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i &quot;</span>, G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span> <span style="color: #008000;">&#125;</span>
			G<span style="color: #008000;">&#91;</span>G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
			numb <span style="color: #000080;">=</span> DFS<span style="color: #008000;">&#40;</span>G, G<span style="color: #008000;">&#91;</span>cur<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>j<span style="color: #008000;">&#93;</span>, p, numb<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		<span style="color: #008000;">&#125;</span>
	<span style="color: #008000;">&#125;</span>
	<span style="color: #0000ff;">return</span> numb<span style="color: #008080;">;</span>
<span style="color: #008000;">&#125;</span>
&nbsp;
<span style="color: #0000ff;">int</span> main<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
	<span style="color: #0000ff;">struct</span> vertice Graph<span style="color: #008000;">&#91;</span><span style="color: #0000dd;">100</span><span style="color: #008000;">&#93;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">int</span> n, m, K, P, i, j, v, u<span style="color: #008080;">;</span>
	<span style="color: #0000dd;">scanf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>n, <span style="color: #000040;">&amp;</span>m, <span style="color: #000040;">&amp;</span>K, <span style="color: #000040;">&amp;</span>P<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> n<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  <span style="color: #339900;">// начальная инициализация </span>
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> 
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> 
		Graph<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">malloc</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  
	<span style="color: #008000;">&#125;</span>
	<span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span>i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> m<span style="color: #008080;">;</span> i<span style="color: #000040;">++</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>  
		<span style="color: #0000dd;">scanf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i%i&quot;</span>, <span style="color: #000040;">&amp;</span>v, <span style="color: #000040;">&amp;</span>u<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">realloc</span><span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span>, <span style="color: #008000;">&#40;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span> <span style="color: #000040;">+</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #000040;">*</span> <span style="color: #0000dd;">sizeof</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">paths</span><span style="color: #008000;">&#91;</span>Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #008000;">&#93;</span> <span style="color: #000080;">=</span> v <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>
		Graph<span style="color: #008000;">&#91;</span>u <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008000;">&#93;</span>.<span style="color: #007788;">number_of_paths</span><span style="color: #000040;">++</span><span style="color: #008080;">;</span>
	<span style="color: #008000;">&#125;</span>
&nbsp;
	<span style="color: #0000ff;">int</span> start <span style="color: #000080;">=</span> K <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// начинаем с K человека</span>
	<span style="color: #0000dd;">printf</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;%i &quot;</span>, K<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
	<span style="color: #0000ff;">int</span> numb <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>  <span style="color: #339900;">// кол-во человек, которые идут в лазертаг</span>
	Graph<span style="color: #008000;">&#91;</span>start<span style="color: #008000;">&#93;</span>.<span style="color: #007788;">flag</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span>  
	DFS<span style="color: #008000;">&#40;</span>Graph, start, P, numb<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>  
	<span style="color: #0000ff;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>
<span style="color: #008000;">&#125;</span></pre>
					
				</div>
				</div>
				</div>
				</div>
				</div>
		
			
		</div>
			
		</div>
	
		
		<div id ="bottomblock">
		<div id="border2"></div>
		<p class="p" style="text-align:center"><a href = "..\index.html" style = "font-family:bookman old style; color: #0000dd"><b>Code.C</b></a>
		&#169 Copyright Павел Калашников 2021
		<br>
		обратная связь <span style="color:#0000dd">code.c04@mail.ru</span></p><br>
		</div>
			
	</div>
	<!-- Yandex.RTB R-A-1944727-4 -->
					<script>window.yaContextCb.push(()=>{
					  Ya.Context.AdvManager.render({
						type: 'floorAd',    
						blockId: 'R-A-1944727-4'
					  })
					})</script>
 </body>
</html>
